<!DOCTYPE html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">
<link rel="stylesheet" href="main.css"/>
<link rel="stylesheet" href="treemap.css"/>

<style>
body {
    margin: 0px;
    button {
        border: solid;
        background-color: #ccc;
        border: solid
    }

    button {
        border: solid;
        background-color: #eee;
        border: solid
    }

    svg {
        fill: white;
    }
}
</style>
<!-- Load d3.js -->
<script src="https://d3js.org/d3.v5.min.js"></script>
<script src="saveSvgAsPng.js"></script>
<script src="utils.js"></script>

<button>Save as image</button>
<div
  class="department-subprogramme-treemap"
  data-aggregate-url="https://openspending.vulekamali.gov.za/api/3/cubes/b9d2af843f3a7ca223eea07fb608e62a:estimates-of-national-expenditure-2019-20-uploaded-2019-02-20t1910/aggregate/?cut=finyear.finyear%3A2019%7Cvoteno.department%3AAgriculture%2C+Forestry+and+Fisheries%7Cbudget_phase.budget_phase%3AMain+appropriation&amp;drilldown=progno.progno%7Cprogno.programme%7Csprogno.subprogramme&amp;pagesize=10000"
  data-openspending-model="{&quot;aggregates&quot;: {&quot;value.sum&quot;: {&quot;function&quot;: &quot;sum&quot;, &quot;measure&quot;: &quot;value&quot;, &quot;ref&quot;: &quot;value.sum&quot;, &quot;label&quot;: &quot;Value&quot;}, &quot;_count&quot;: {&quot;function&quot;: &quot;count&quot;, &quot;ref&quot;: &quot;_count&quot;, &quot;label&quot;: &quot;Facts&quot;}}, &quot;hierarchies&quot;: {&quot;phase&quot;: {&quot;levels&quot;: [&quot;budget_phase&quot;], &quot;ref&quot;: &quot;phase&quot;, &quot;label&quot;: &quot;phase&quot;}, &quot;economic_classification&quot;: {&quot;levels&quot;: [&quot;econ1&quot;, &quot;econ2&quot;, &quot;econ3&quot;, &quot;econ4&quot;, &quot;econ5&quot;], &quot;ref&quot;: &quot;economic_classification&quot;, &quot;label&quot;: &quot;economic_classification&quot;}, &quot;activity&quot;: {&quot;levels&quot;: [&quot;progno&quot;, &quot;sprogno&quot;], &quot;ref&quot;: &quot;activity&quot;, &quot;label&quot;: &quot;activity&quot;}, &quot;date&quot;: {&quot;levels&quot;: [&quot;finyear&quot;], &quot;ref&quot;: &quot;date&quot;, &quot;label&quot;: &quot;date&quot;}, &quot;administrative_classification&quot;: {&quot;levels&quot;: [&quot;voteno&quot;], &quot;ref&quot;: &quot;administrative_classification&quot;, &quot;label&quot;: &quot;administrative_classification&quot;}, &quot;functional_classification&quot;: {&quot;levels&quot;: [&quot;fg1&quot;, &quot;fg2&quot;], &quot;ref&quot;: &quot;functional_classification&quot;, &quot;label&quot;: &quot;functional_classification&quot;}}, &quot;measures&quot;: {&quot;value&quot;: {&quot;column&quot;: &quot;value&quot;, &quot;ref&quot;: &quot;value&quot;, &quot;type&quot;: &quot;number&quot;, &quot;label&quot;: &quot;Value&quot;}}, &quot;dimensions&quot;: {&quot;econ3&quot;: {&quot;hierarchy&quot;: &quot;economic_classification&quot;, &quot;ref&quot;: &quot;econ3&quot;, &quot;key_attribute&quot;: &quot;econ3&quot;, &quot;label&quot;: &quot;Econ3&quot;, &quot;cardinality_class&quot;: null, &quot;key_ref&quot;: &quot;econ3.econ3&quot;, &quot;attributes&quot;: {&quot;econ3&quot;: {&quot;column&quot;: &quot;b9d2af843f3a7ca223eea07fb608e62a46912ff1719d9a91_3.econ3&quot;, &quot;ref&quot;: &quot;econ3.econ3&quot;, &quot;type&quot;: &quot;string&quot;, &quot;label&quot;: &quot;Econ3&quot;}}, &quot;label_attribute&quot;: &quot;econ3&quot;, &quot;join_column&quot;: [&quot;economic_classification_id&quot;, &quot;_fdp__id_&quot;], &quot;label_ref&quot;: &quot;econ3.econ3&quot;}, &quot;budget_phase&quot;: {&quot;hierarchy&quot;: &quot;phase&quot;, &quot;ref&quot;: &quot;budget_phase&quot;, &quot;key_attribute&quot;: &quot;budget_phase&quot;, &quot;label&quot;: &quot;Budget Phase&quot;, &quot;cardinality_class&quot;: null, &quot;key_ref&quot;: &quot;budget_phase.budget_phase&quot;, &quot;attributes&quot;: {&quot;budget_phase&quot;: {&quot;column&quot;: &quot;b9d2af843f3a7ca223eea07fb608e62a46912ff1719d9a91_5.budget_phase&quot;, &quot;ref&quot;: &quot;budget_phase.budget_phase&quot;, &quot;type&quot;: &quot;string&quot;, &quot;label&quot;: &quot;Budget Phase&quot;}}, &quot;label_attribute&quot;: &quot;budget_phase&quot;, &quot;join_column&quot;: [&quot;phase_id&quot;, &quot;_fdp__id_&quot;], &quot;label_ref&quot;: &quot;budget_phase.budget_phase&quot;}, &quot;voteno&quot;: {&quot;hierarchy&quot;: &quot;administrative_classification&quot;, &quot;label_attribute&quot;: &quot;department&quot;, &quot;key_attribute&quot;: &quot;voteno&quot;, &quot;label&quot;: &quot;VoteNo&quot;, &quot;cardinality_class&quot;: null, &quot;key_ref&quot;: &quot;voteno.voteno&quot;, &quot;attributes&quot;: {&quot;department&quot;: {&quot;column&quot;: &quot;b9d2af843f3a7ca223eea07fb608e62a46912ff1719d9a91_1.department&quot;, &quot;ref&quot;: &quot;voteno.department&quot;, &quot;type&quot;: &quot;string&quot;, &quot;label&quot;: &quot;Department&quot;}, &quot;voteno&quot;: {&quot;column&quot;: &quot;b9d2af843f3a7ca223eea07fb608e62a46912ff1719d9a91_1.voteno&quot;, &quot;ref&quot;: &quot;voteno.voteno&quot;, &quot;type&quot;: &quot;string&quot;, &quot;label&quot;: &quot;VoteNo&quot;}}, &quot;ref&quot;: &quot;voteno&quot;, &quot;join_column&quot;: [&quot;administrative_classification_id&quot;, &quot;_fdp__id_&quot;], &quot;label_ref&quot;: &quot;voteno.department&quot;}, &quot;progno&quot;: {&quot;hierarchy&quot;: &quot;activity&quot;, &quot;label_attribute&quot;: &quot;programme&quot;, &quot;key_attribute&quot;: &quot;progno&quot;, &quot;label&quot;: &quot;ProgNo&quot;, &quot;cardinality_class&quot;: null, &quot;key_ref&quot;: &quot;progno.progno&quot;, &quot;attributes&quot;: {&quot;programme&quot;: {&quot;column&quot;: &quot;b9d2af843f3a7ca223eea07fb608e62a46912ff1719d9a91_0.programme&quot;, &quot;ref&quot;: &quot;progno.programme&quot;, &quot;type&quot;: &quot;string&quot;, &quot;label&quot;: &quot;Programme&quot;}, &quot;progno&quot;: {&quot;column&quot;: &quot;b9d2af843f3a7ca223eea07fb608e62a46912ff1719d9a91_0.progno&quot;, &quot;ref&quot;: &quot;progno.progno&quot;, &quot;type&quot;: &quot;string&quot;, &quot;label&quot;: &quot;ProgNo&quot;}}, &quot;ref&quot;: &quot;progno&quot;, &quot;join_column&quot;: [&quot;activity_id&quot;, &quot;_fdp__id_&quot;], &quot;label_ref&quot;: &quot;progno.programme&quot;}, &quot;fg1&quot;: {&quot;hierarchy&quot;: &quot;functional_classification&quot;, &quot;ref&quot;: &quot;fg1&quot;, &quot;key_attribute&quot;: &quot;fg1&quot;, &quot;label&quot;: &quot;FG1&quot;, &quot;cardinality_class&quot;: null, &quot;key_ref&quot;: &quot;fg1.fg1&quot;, &quot;attributes&quot;: {&quot;fg1&quot;: {&quot;column&quot;: &quot;b9d2af843f3a7ca223eea07fb608e62a46912ff1719d9a91_4.fg1&quot;, &quot;ref&quot;: &quot;fg1.fg1&quot;, &quot;type&quot;: &quot;string&quot;, &quot;label&quot;: &quot;FG1&quot;}}, &quot;label_attribute&quot;: &quot;fg1&quot;, &quot;join_column&quot;: [&quot;functional_classification_id&quot;, &quot;_fdp__id_&quot;], &quot;label_ref&quot;: &quot;fg1.fg1&quot;}, &quot;fg2&quot;: {&quot;hierarchy&quot;: &quot;functional_classification&quot;, &quot;ref&quot;: &quot;fg2&quot;, &quot;key_attribute&quot;: &quot;fg2&quot;, &quot;label&quot;: &quot;FG2&quot;, &quot;cardinality_class&quot;: null, &quot;key_ref&quot;: &quot;fg2.fg2&quot;, &quot;attributes&quot;: {&quot;fg2&quot;: {&quot;column&quot;: &quot;b9d2af843f3a7ca223eea07fb608e62a46912ff1719d9a91_4.fg2&quot;, &quot;ref&quot;: &quot;fg2.fg2&quot;, &quot;type&quot;: &quot;string&quot;, &quot;label&quot;: &quot;FG2&quot;}}, &quot;label_attribute&quot;: &quot;fg2&quot;, &quot;join_column&quot;: [&quot;functional_classification_id&quot;, &quot;_fdp__id_&quot;], &quot;label_ref&quot;: &quot;fg2.fg2&quot;}, &quot;sprogno&quot;: {&quot;hierarchy&quot;: &quot;activity&quot;, &quot;label_attribute&quot;: &quot;subprogramme&quot;, &quot;key_attribute&quot;: &quot;sprogno&quot;, &quot;label&quot;: &quot;SprogNo&quot;, &quot;cardinality_class&quot;: null, &quot;key_ref&quot;: &quot;sprogno.sprogno&quot;, &quot;attributes&quot;: {&quot;subprogramme&quot;: {&quot;column&quot;: &quot;b9d2af843f3a7ca223eea07fb608e62a46912ff1719d9a91_0.subprogramme&quot;, &quot;ref&quot;: &quot;sprogno.subprogramme&quot;, &quot;type&quot;: &quot;string&quot;, &quot;label&quot;: &quot;Subprogramme&quot;}, &quot;sprogno&quot;: {&quot;column&quot;: &quot;b9d2af843f3a7ca223eea07fb608e62a46912ff1719d9a91_0.sprogno&quot;, &quot;ref&quot;: &quot;sprogno.sprogno&quot;, &quot;type&quot;: &quot;string&quot;, &quot;label&quot;: &quot;SprogNo&quot;}}, &quot;ref&quot;: &quot;sprogno&quot;, &quot;join_column&quot;: [&quot;activity_id&quot;, &quot;_fdp__id_&quot;], &quot;label_ref&quot;: &quot;sprogno.subprogramme&quot;}, &quot;econ1&quot;: {&quot;hierarchy&quot;: &quot;economic_classification&quot;, &quot;ref&quot;: &quot;econ1&quot;, &quot;key_attribute&quot;: &quot;econ1&quot;, &quot;label&quot;: &quot;Econ1&quot;, &quot;cardinality_class&quot;: null, &quot;key_ref&quot;: &quot;econ1.econ1&quot;, &quot;attributes&quot;: {&quot;econ1&quot;: {&quot;column&quot;: &quot;b9d2af843f3a7ca223eea07fb608e62a46912ff1719d9a91_3.econ1&quot;, &quot;ref&quot;: &quot;econ1.econ1&quot;, &quot;type&quot;: &quot;string&quot;, &quot;label&quot;: &quot;Econ1&quot;}}, &quot;label_attribute&quot;: &quot;econ1&quot;, &quot;join_column&quot;: [&quot;economic_classification_id&quot;, &quot;_fdp__id_&quot;], &quot;label_ref&quot;: &quot;econ1.econ1&quot;}, &quot;econ2&quot;: {&quot;hierarchy&quot;: &quot;economic_classification&quot;, &quot;ref&quot;: &quot;econ2&quot;, &quot;key_attribute&quot;: &quot;econ2&quot;, &quot;label&quot;: &quot;Econ2&quot;, &quot;cardinality_class&quot;: null, &quot;key_ref&quot;: &quot;econ2.econ2&quot;, &quot;attributes&quot;: {&quot;econ2&quot;: {&quot;column&quot;: &quot;b9d2af843f3a7ca223eea07fb608e62a46912ff1719d9a91_3.econ2&quot;, &quot;ref&quot;: &quot;econ2.econ2&quot;, &quot;type&quot;: &quot;string&quot;, &quot;label&quot;: &quot;Econ2&quot;}}, &quot;label_attribute&quot;: &quot;econ2&quot;, &quot;join_column&quot;: [&quot;economic_classification_id&quot;, &quot;_fdp__id_&quot;], &quot;label_ref&quot;: &quot;econ2.econ2&quot;}, &quot;finyear&quot;: {&quot;hierarchy&quot;: &quot;date&quot;, &quot;ref&quot;: &quot;finyear&quot;, &quot;key_attribute&quot;: &quot;finyear&quot;, &quot;label&quot;: &quot;FinYear&quot;, &quot;cardinality_class&quot;: null, &quot;key_ref&quot;: &quot;finyear.finyear&quot;, &quot;attributes&quot;: {&quot;finyear&quot;: {&quot;column&quot;: &quot;b9d2af843f3a7ca223eea07fb608e62a46912ff1719d9a91_2.finyear&quot;, &quot;ref&quot;: &quot;finyear.finyear&quot;, &quot;type&quot;: &quot;integer&quot;, &quot;label&quot;: &quot;FinYear&quot;}}, &quot;label_attribute&quot;: &quot;finyear&quot;, &quot;join_column&quot;: [&quot;date_id&quot;, &quot;_fdp__id_&quot;], &quot;label_ref&quot;: &quot;finyear.finyear&quot;}, &quot;econ4&quot;: {&quot;hierarchy&quot;: &quot;economic_classification&quot;, &quot;ref&quot;: &quot;econ4&quot;, &quot;key_attribute&quot;: &quot;econ4&quot;, &quot;label&quot;: &quot;Econ4&quot;, &quot;cardinality_class&quot;: null, &quot;key_ref&quot;: &quot;econ4.econ4&quot;, &quot;attributes&quot;: {&quot;econ4&quot;: {&quot;column&quot;: &quot;b9d2af843f3a7ca223eea07fb608e62a46912ff1719d9a91_3.econ4&quot;, &quot;ref&quot;: &quot;econ4.econ4&quot;, &quot;type&quot;: &quot;string&quot;, &quot;label&quot;: &quot;Econ4&quot;}}, &quot;label_attribute&quot;: &quot;econ4&quot;, &quot;join_column&quot;: [&quot;economic_classification_id&quot;, &quot;_fdp__id_&quot;], &quot;label_ref&quot;: &quot;econ4.econ4&quot;}, &quot;econ5&quot;: {&quot;hierarchy&quot;: &quot;economic_classification&quot;, &quot;ref&quot;: &quot;econ5&quot;, &quot;key_attribute&quot;: &quot;econ5&quot;, &quot;label&quot;: &quot;Econ5&quot;, &quot;cardinality_class&quot;: null, &quot;key_ref&quot;: &quot;econ5.econ5&quot;, &quot;attributes&quot;: {&quot;econ5&quot;: {&quot;column&quot;: &quot;b9d2af843f3a7ca223eea07fb608e62a46912ff1719d9a91_3.econ5&quot;, &quot;ref&quot;: &quot;econ5.econ5&quot;, &quot;type&quot;: &quot;string&quot;, &quot;label&quot;: &quot;Econ5&quot;}}, &quot;label_attribute&quot;: &quot;econ5&quot;, &quot;join_column&quot;: [&quot;economic_classification_id&quot;, &quot;_fdp__id_&quot;], &quot;label_ref&quot;: &quot;econ5.econ5&quot;}}, &quot;fact_table&quot;: &quot;b9d2af843f3a7ca223eea07fb608e62a46912ff1719d9a91&quot;}"
  >
</div>
<script src="https://cdn.jsdelivr.net/npm/promise-polyfill@8/dist/polyfill.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fetch/3.0.0/fetch.min.js"></script>
<script src="elements.js"></script>
<script src="openspending.js"></script>
<script src="vulekamali-openspending.js"></script>

<script src="dept-treemap.js"></script>

    <script>
        d3.selectAll("button")
            .on("click", function() {
                svg = d3.selectAll("svg")
                saveSvgAsPng(svg.node(), "diagram.png");
            })
    </script>
